@using TempLoggerService.Models
<div id="body">
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>Welcome to ASP.NET Web API!</h1>
                <h2>Modify the code in this template to jump-start your ASP.NET Web API development.</h2>
            </hgroup>
            <p>
                ASP.NET Web API allows you to expose your applications, data and services to the
                web directly over HTTP.
            </p>
            <p>
                To learn more about ASP.NET Web API visit the
                <a href="http://go.microsoft.com/fwlink/?LinkID=238195" title="ASP.NET Web API Website">ASP.NET Web API Website</a>.
                The page features <mark>videos, tutorials, and samples</mark> to help you get the most from ASP.NET Web API.
                If you have any questions about ASP.NET Web API, visit
                <a href="http://go.microsoft.com/fwlink/?LinkID=238196" title="ASP.NET Web API Forum">our forums</a>.
            </p>
        </div>
    </section>
    <section class="content-wrapper main-content clear-fix">
        <canvas id="myChart" width="800" height="400"></canvas>
        <script type="text/javascript">
            var ctx = document.getElementById("myChart").getContext("2d");
            var chartdata = { labels: [], datasets: [{
                    label: "My First dataset",
                    fillColor: "rgba(220,220,220,0.2)",
                    strokeColor: "rgba(220,220,220,1)",
                    pointColor: "rgba(220,220,220,1)",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,220,1)",
                    data: []
                }]
            };

            $.getJSON("api/device/rpi2", function(data) {
                $.getJSON("api/temperature/GetLast24HourTemps/" + data, function(tempdata) {
                    for (var i = 0; i < tempdata.length; i++) {
                        chartdata.labels.push(tempdata[i].hour);
                        chartdata.datasets[0].data.push(tempdata[i].avgtemp);
                    }

                    var myLineChart = new Chart(ctx).Line(chartdata, { bezierCurve: false });
                    
                });
            });
        </script>
    </section>
</div>
